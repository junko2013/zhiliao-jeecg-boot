<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="org.jeecg.modules.im.mapper.MyGifMapper">

    <select id="findAll" resultType="org.jeecg.modules.im.entity.MyGif">
        select mg.id,user_id, mg.thumb, mg.origin,mg.height,mg.width, mg.order_no, mg.ts_create,mg.ts_last_send,mg.ts_pin,gif_id,g.is_locked,g.emoji,g.emoji_code
        from im_my_gif mg
        right join im_gif g on mg.gif_id = g.id
        where user_id = #{q.userId}
        order by ts_pin desc,ts_last_send desc,mg.order_no desc,mg.ts_create desc
    </select>
    <select id="findByGifId" resultMap="org.jeecg.modules.im.entity.MyGif">
        select * from im_my_gif where user_id = #{userId} and gif_id = #{gifId}
    </select>
    <update id="pin">
        update im_my_gif set ts_pin = #{ts} where id = #{id}
    </update>

</mapper>
